package dev.kizuna.mod.modules.impl.exploit;

import dev.kizuna.api.events.eventbus.EventListener;
import dev.kizuna.api.events.impl.PacketEvent;
import dev.kizuna.mod.modules.Module;
import net.minecraft.network.packet.c2s.play.PlayerActionC2SPacket;
import net.minecraft.network.packet.c2s.play.PlayerActionC2SPacket.Action;
import net.minecraft.screen.slot.SlotActionType;

public class InfiniteTrident extends Module {
   public InfiniteTrident() {
      super("InfiniteTrident", Category.Exploit);
      this.setChinese("无限三叉戟");
   }

   @EventListener(priority = 201)
   private void onSendPacket(PacketEvent.Send event) {
      if (event.getPacket() instanceof PlayerActionC2SPacket packet && packet.getAction() == Action.RELEASE_USE_ITEM) {
         mc.interactionManager.clickSlot(mc.player.currentScreenHandler.syncId, 3, mc.player.getInventory().selectedSlot, SlotActionType.SWAP, mc.player);
      }
   }

   @EventListener(priority = 201)
   private void onSendPacket(PacketEvent.Sent event) {
      if (event.getPacket() instanceof PlayerActionC2SPacket packet && packet.getAction() == Action.RELEASE_USE_ITEM) {
         mc.interactionManager.clickSlot(mc.player.currentScreenHandler.syncId, 3, mc.player.getInventory().selectedSlot, SlotActionType.SWAP, mc.player);
      }
   }
}
