package dev.kizuna.mod.modules.impl.exploit;

import dev.kizuna.api.events.eventbus.EventHandler;
import dev.kizuna.api.utils.combat.CombatUtil;
import dev.kizuna.mod.modules.Module;
import dev.kizuna.mod.modules.settings.impl.SliderSetting;
import net.minecraft.entity.player.PlayerEntity;

public class TargetTP extends Module {

    private final SliderSetting maxDistance = add(new SliderSetting("MaxRange", 1, 1, 10, 1));

    public TargetTP() {
        super("TargetTP", Category.Exploit);
    }

    @EventHandler
    private void onTick() {
        if (mc.player != null && mc.player.isUsingItem()) return;

        for (PlayerEntity player : CombatUtil.getEnemies(maxDistance.getValue())) {
            mc.player.setPosition(player.getX() + 0.5, player.getY() + player.getHeight(), player.getZ() + 0.5);
            return;
        }
    }

    @Override
    public void onEnable() {
        if (nullCheck()) {
            disable();
            return;
        }
        onTick();
        disable();
    }
}
